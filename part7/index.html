<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 3.14.6"/><link rel="icon" href="/databases/favicon-32x32.png?v=dd253edc615d56282c5dcdfb24ca4261" type="image/png"/><link rel="manifest" href="/databases/manifest.webmanifest" crossorigin="anonymous"/><meta name="theme-color" content="#a2466c"/><link rel="apple-touch-icon" sizes="48x48" href="/databases/icons/icon-48x48.png?v=dd253edc615d56282c5dcdfb24ca4261"/><link rel="apple-touch-icon" sizes="72x72" href="/databases/icons/icon-72x72.png?v=dd253edc615d56282c5dcdfb24ca4261"/><link rel="apple-touch-icon" sizes="96x96" href="/databases/icons/icon-96x96.png?v=dd253edc615d56282c5dcdfb24ca4261"/><link rel="apple-touch-icon" sizes="144x144" href="/databases/icons/icon-144x144.png?v=dd253edc615d56282c5dcdfb24ca4261"/><link rel="apple-touch-icon" sizes="192x192" href="/databases/icons/icon-192x192.png?v=dd253edc615d56282c5dcdfb24ca4261"/><link rel="apple-touch-icon" sizes="256x256" href="/databases/icons/icon-256x256.png?v=dd253edc615d56282c5dcdfb24ca4261"/><link rel="apple-touch-icon" sizes="384x384" href="/databases/icons/icon-384x384.png?v=dd253edc615d56282c5dcdfb24ca4261"/><link rel="apple-touch-icon" sizes="512x512" href="/databases/icons/icon-512x512.png?v=dd253edc615d56282c5dcdfb24ca4261"/><title data-react-helmet="true">Efficiency</title><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper img{bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block;vertical-align:top}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){if(void 0===e.target.dataset.mainImage)return;if(void 0===e.target.dataset.gatsbyImageSsr)return;const t=e.target;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script><link as="script" rel="preload" href="/databases/webpack-runtime-268f6552388089c91965.js"/><link as="script" rel="preload" href="/databases/framework-d79a9ccabaa25efea902.js"/><link as="script" rel="preload" href="/databases/app-ed530a94b36d312dc3da.js"/><link as="script" rel="preload" href="/databases/commons-2a140772cd0d960d3ca2.js"/><link as="script" rel="preload" href="/databases/component---src-templates-docs-js-c82167b9612215b3fdf2.js"/><link as="fetch" rel="preload" href="/databases/page-data/part7/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/databases/page-data/sq/d/1885717130.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/databases/page-data/sq/d/1950529541.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/databases/page-data/sq/d/2744905544.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/databases/page-data/sq/d/3020054368.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/databases/page-data/app-data.json" crossorigin="anonymous"/></head><body><script>(function() { try {
  var mode = localStorage.getItem('theme-ui-color-mode');
  if (!mode) return
  document.documentElement.classList.add('theme-ui-' + mode);
} catch (e) {} })();</script><div id="___gatsby"><style data-emotion="css-global xghfnh">html{--theme-ui-colors-header:#fff;--theme-ui-colors-text:#000;--theme-ui-colors-primary:#E10E49;--theme-ui-colors-secondary:#c70d3a;--theme-ui-colors-highlight:#efeffe;--theme-ui-colors-exercise:#3333ee;--theme-ui-colors-sidebar:#f8f5f1;--theme-ui-colors-background:#fff;--theme-ui-colors-borderColor:rgba(0, 0, 0, 0.15);--theme-ui-colors-footer:#E10E49;color:var(--theme-ui-colors-text);background-color:var(--theme-ui-colors-background);}</style><style data-emotion="css-global dcnl1w">*{box-sizing:border-box;}html{font-family:-apple-system,BlinkMacSystemFont,San Francisco,Helvetica Neue,Helvetica,Ubuntu,Roboto,Noto,Segoe UI,Arial,sans-serif;line-height:1.5;font-weight:400;}html h1{font-family:-apple-system,BlinkMacSystemFont,San Francisco,Helvetica Neue,Helvetica,Ubuntu,Roboto,Noto,Segoe UI,Arial,sans-serif;line-height:1.125;font-weight:700;margin-top:0;margin-bottom:16px;font-size:36px;}html h1::before{content:" ";display:block;padding-top:30px;margin-bottom:40px;border-bottom:1px solid;border-bottom-color:var(--theme-ui-colors-borderColor);}html h2{font-family:-apple-system,BlinkMacSystemFont,San Francisco,Helvetica Neue,Helvetica,Ubuntu,Roboto,Noto,Segoe UI,Arial,sans-serif;line-height:1.125;font-weight:700;margin-top:0;margin-bottom:16px;font-size:28px;}html h2::before{content:" ";display:block;padding-top:30px;margin-bottom:40px;border-bottom:1px solid;border-bottom-color:var(--theme-ui-colors-borderColor);}html h3{font-family:-apple-system,BlinkMacSystemFont,San Francisco,Helvetica Neue,Helvetica,Ubuntu,Roboto,Noto,Segoe UI,Arial,sans-serif;line-height:1.125;font-weight:700;margin-top:0;margin-bottom:16px;font-size:24px;}html h3::before{content:" ";display:block;padding-top:30px;margin-bottom:40px;border-bottom:1px solid;border-bottom-color:var(--theme-ui-colors-borderColor);}html h4{font-family:-apple-system,BlinkMacSystemFont,San Francisco,Helvetica Neue,Helvetica,Ubuntu,Roboto,Noto,Segoe UI,Arial,sans-serif;line-height:1.125;font-weight:700;margin-top:0;margin-bottom:16px;font-size:16px;}html h4::before{content:" ";display:block;padding-top:30px;margin-bottom:40px;border-bottom:1px solid;border-bottom-color:var(--theme-ui-colors-borderColor);}html h5{font-family:-apple-system,BlinkMacSystemFont,San Francisco,Helvetica Neue,Helvetica,Ubuntu,Roboto,Noto,Segoe UI,Arial,sans-serif;line-height:1.125;font-weight:700;margin-top:0;margin-bottom:16px;font-size:14px;}html h5::before{content:" ";display:block;padding-top:30px;margin-bottom:40px;border-bottom:1px solid;border-bottom-color:var(--theme-ui-colors-borderColor);}html h6{font-family:-apple-system,BlinkMacSystemFont,San Francisco,Helvetica Neue,Helvetica,Ubuntu,Roboto,Noto,Segoe UI,Arial,sans-serif;line-height:1.125;font-weight:700;margin-top:0;margin-bottom:16px;font-size:12px;}html h6::before{content:" ";display:block;padding-top:30px;margin-bottom:40px;border-bottom:1px solid;border-bottom-color:var(--theme-ui-colors-borderColor);}body{margin:0;}</style><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><style data-emotion="css ylfa0c">.css-ylfa0c{font-family:-apple-system,BlinkMacSystemFont,San Francisco,Helvetica Neue,Helvetica,Ubuntu,Roboto,Noto,Segoe UI,Arial,sans-serif;line-height:1.5;font-weight:400;}.css-ylfa0c h1{font-family:-apple-system,BlinkMacSystemFont,San Francisco,Helvetica Neue,Helvetica,Ubuntu,Roboto,Noto,Segoe UI,Arial,sans-serif;line-height:1.125;font-weight:700;margin-top:0;margin-bottom:16px;font-size:36px;}.css-ylfa0c h1::before{content:" ";display:block;padding-top:30px;margin-bottom:40px;border-bottom:1px solid;border-bottom-color:var(--theme-ui-colors-borderColor);}.css-ylfa0c h2{font-family:-apple-system,BlinkMacSystemFont,San Francisco,Helvetica Neue,Helvetica,Ubuntu,Roboto,Noto,Segoe UI,Arial,sans-serif;line-height:1.125;font-weight:700;margin-top:0;margin-bottom:16px;font-size:28px;}.css-ylfa0c h2::before{content:" ";display:block;padding-top:30px;margin-bottom:40px;border-bottom:1px solid;border-bottom-color:var(--theme-ui-colors-borderColor);}.css-ylfa0c h3{font-family:-apple-system,BlinkMacSystemFont,San Francisco,Helvetica Neue,Helvetica,Ubuntu,Roboto,Noto,Segoe UI,Arial,sans-serif;line-height:1.125;font-weight:700;margin-top:0;margin-bottom:16px;font-size:24px;}.css-ylfa0c h3::before{content:" ";display:block;padding-top:30px;margin-bottom:40px;border-bottom:1px solid;border-bottom-color:var(--theme-ui-colors-borderColor);}.css-ylfa0c h4{font-family:-apple-system,BlinkMacSystemFont,San Francisco,Helvetica Neue,Helvetica,Ubuntu,Roboto,Noto,Segoe UI,Arial,sans-serif;line-height:1.125;font-weight:700;margin-top:0;margin-bottom:16px;font-size:16px;}.css-ylfa0c h4::before{content:" ";display:block;padding-top:30px;margin-bottom:40px;border-bottom:1px solid;border-bottom-color:var(--theme-ui-colors-borderColor);}.css-ylfa0c h5{font-family:-apple-system,BlinkMacSystemFont,San Francisco,Helvetica Neue,Helvetica,Ubuntu,Roboto,Noto,Segoe UI,Arial,sans-serif;line-height:1.125;font-weight:700;margin-top:0;margin-bottom:16px;font-size:14px;}.css-ylfa0c h5::before{content:" ";display:block;padding-top:30px;margin-bottom:40px;border-bottom:1px solid;border-bottom-color:var(--theme-ui-colors-borderColor);}.css-ylfa0c h6{font-family:-apple-system,BlinkMacSystemFont,San Francisco,Helvetica Neue,Helvetica,Ubuntu,Roboto,Noto,Segoe UI,Arial,sans-serif;line-height:1.125;font-weight:700;margin-top:0;margin-bottom:16px;font-size:12px;}.css-ylfa0c h6::before{content:" ";display:block;padding-top:30px;margin-bottom:40px;border-bottom:1px solid;border-bottom-color:var(--theme-ui-colors-borderColor);}</style><div class="css-ylfa0c"><style data-emotion="css-global 5u4lmb">:root{--ease-in-quad:cubic-bezier(0.55, 0.085, 0.68, 0.53);--ease-in-quart:cubic-bezier(0.895, 0.03, 0.685, 0.22);--ease-out-quad:cubic-bezier(0.25, 0.46, 0.45, 0.94);--ease-out-quart:cubic-bezier(0.165, 0.84, 0.44, 1);--ease-in-out-quad:cubic-bezier(0.455, 0.03, 0.515, 0.955);--ease-in-out-quart:cubic-bezier(0.77, 0, 0.175, 1);}*,*:before,*:after{box-sizing:inherit;}:root{box-sizing:border-box;}body{margin:0;}.gatsby-resp-image-image{width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;}</style><style data-emotion="css dl5fst">.css-dl5fst{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-ms-flex-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:1rem 1rem;z-index:5;background:var(--theme-ui-colors-header);-webkit-transition:all 0.25s var(--ease-in-out-quad);transition:all 0.25s var(--ease-in-out-quad);border-bottom:1px solid var(--theme-ui-colors-borderColor);}@media (min-width: 38.73684210526316em){.css-dl5fst{position:fixed;top:0;left:0;right:0;padding:1rem 1.2rem;-webkit-transform:translateX(0);-moz-transform:translateX(0);-ms-transform:translateX(0);transform:translateX(0);}}</style><header class="css-dl5fst eneaom32"><style data-emotion="css 13apmpg">.css-13apmpg{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;margin:0;text-alight:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}</style><div class="css-13apmpg eneaom30"><style data-emotion="css 1gp7fjh">.css-1gp7fjh{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;margin-right:1rem;}@media (min-width: 38.73684210526316em){.css-1gp7fjh{display:none;}}</style><div class="css-1gp7fjh eneaom31"><style data-emotion="css i05np8">.css-i05np8{padding:0;background:none;border:none;color:var(--theme-ui-colors-text);cursor:pointer;font-size:0.8rem;}.css-i05np8:hover{color:var(--theme-ui-colors-primary);}</style><button type="button" aria-label="Open Navigation" title="Open Navigation" class="css-i05np8 e1onh9ai0"><style data-emotion="css z2vy6x">.css-z2vy6x{display:inline-block;width:30px;height:30px;}</style><span size="30" class="css-z2vy6x e1jw6cnh0"><style data-emotion="css 17rqqes">.css-17rqqes{fill:var(--theme-ui-colors-text);-webkit-transition:all 0.2s ease-out;transition:all 0.2s ease-out;}.css-17rqqes:hover,.css-17rqqes:focus{fill:var(--theme-ui-colors-primary);}</style><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="css-17rqqes e15jrc190"><path fill="none" d="M0 0h24v24H0V0z"></path><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"></path></svg></span></button></div><style data-emotion="css 13bl6n6">.css-13bl6n6{width:10rem;}.css-13bl6n6 p{margin:0;font-size:1.6rem;}</style><div class="css-13bl6n6 ewwdldv1"><style data-emotion="css o97vb3">.css-o97vb3{display:block;-webkit-text-decoration:none;text-decoration:none;color:var(--theme-ui-colors-text);-webkit-transition:color 0.2s ease-out;transition:color 0.2s ease-out;}.css-o97vb3:hover,.css-o97vb3:focus{color:var(--theme-ui-colors-primary);}</style><a class="css-o97vb3 ewwdldv0" href="/databases/"><div data-gatsby-image-wrapper="" class="gatsby-image-wrapper gatsby-image-wrapper-constrained"><div style="max-width:2641px;display:block"><img alt="" role="presentation" aria-hidden="true" src="data:image/svg+xml;charset=utf-8,%3Csvg height=&#x27;1219&#x27; width=&#x27;2641&#x27; xmlns=&#x27;http://www.w3.org/2000/svg&#x27; version=&#x27;1.1&#x27;%3E%3C/svg%3E" style="max-width:100%;display:block;position:static"/></div><div aria-hidden="true" data-placeholder-image="" style="opacity:1;transition:opacity 500ms linear;background-color:#f8f8f8;position:absolute;top:0;left:0;bottom:0;right:0"></div><picture><source type="image/avif" data-srcset="/databases/static/7c5268770640a4d118046a43d1aa9fe2/9469b/Centria-tunnus-RGB-FI-marginaalilla.avif 660w,/databases/static/7c5268770640a4d118046a43d1aa9fe2/bb0ac/Centria-tunnus-RGB-FI-marginaalilla.avif 1321w,/databases/static/7c5268770640a4d118046a43d1aa9fe2/7558a/Centria-tunnus-RGB-FI-marginaalilla.avif 2641w" sizes="(min-width: 2641px) 2641px, 100vw"/><source type="image/webp" data-srcset="/databases/static/7c5268770640a4d118046a43d1aa9fe2/9ecf4/Centria-tunnus-RGB-FI-marginaalilla.webp 660w,/databases/static/7c5268770640a4d118046a43d1aa9fe2/316a0/Centria-tunnus-RGB-FI-marginaalilla.webp 1321w,/databases/static/7c5268770640a4d118046a43d1aa9fe2/93023/Centria-tunnus-RGB-FI-marginaalilla.webp 2641w" sizes="(min-width: 2641px) 2641px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="(min-width: 2641px) 2641px, 100vw" decoding="async" loading="lazy" data-src="/databases/static/7c5268770640a4d118046a43d1aa9fe2/0cf45/Centria-tunnus-RGB-FI-marginaalilla.jpg" data-srcset="/databases/static/7c5268770640a4d118046a43d1aa9fe2/39f99/Centria-tunnus-RGB-FI-marginaalilla.jpg 660w,/databases/static/7c5268770640a4d118046a43d1aa9fe2/844fa/Centria-tunnus-RGB-FI-marginaalilla.jpg 1321w,/databases/static/7c5268770640a4d118046a43d1aa9fe2/0cf45/Centria-tunnus-RGB-FI-marginaalilla.jpg 2641w" alt="Centria banner"/></picture><noscript><picture><source type="image/avif" srcSet="/databases/static/7c5268770640a4d118046a43d1aa9fe2/9469b/Centria-tunnus-RGB-FI-marginaalilla.avif 660w,/databases/static/7c5268770640a4d118046a43d1aa9fe2/bb0ac/Centria-tunnus-RGB-FI-marginaalilla.avif 1321w,/databases/static/7c5268770640a4d118046a43d1aa9fe2/7558a/Centria-tunnus-RGB-FI-marginaalilla.avif 2641w" sizes="(min-width: 2641px) 2641px, 100vw"/><source type="image/webp" srcSet="/databases/static/7c5268770640a4d118046a43d1aa9fe2/9ecf4/Centria-tunnus-RGB-FI-marginaalilla.webp 660w,/databases/static/7c5268770640a4d118046a43d1aa9fe2/316a0/Centria-tunnus-RGB-FI-marginaalilla.webp 1321w,/databases/static/7c5268770640a4d118046a43d1aa9fe2/93023/Centria-tunnus-RGB-FI-marginaalilla.webp 2641w" sizes="(min-width: 2641px) 2641px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="(min-width: 2641px) 2641px, 100vw" decoding="async" loading="lazy" src="/databases/static/7c5268770640a4d118046a43d1aa9fe2/0cf45/Centria-tunnus-RGB-FI-marginaalilla.jpg" srcSet="/databases/static/7c5268770640a4d118046a43d1aa9fe2/39f99/Centria-tunnus-RGB-FI-marginaalilla.jpg 660w,/databases/static/7c5268770640a4d118046a43d1aa9fe2/844fa/Centria-tunnus-RGB-FI-marginaalilla.jpg 1321w,/databases/static/7c5268770640a4d118046a43d1aa9fe2/0cf45/Centria-tunnus-RGB-FI-marginaalilla.jpg 2641w" alt="Centria banner"/></picture></noscript><script type="module">const t="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll("img[data-main-image]");for(let e of t){e.dataset.src&&(e.setAttribute("src",e.dataset.src),e.removeAttribute("data-src")),e.dataset.srcset&&(e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset"));const t=e.parentNode.querySelectorAll("source[data-srcset]");for(let e of t)e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset");e.complete&&(e.style.opacity=1)}}</script></div></a></div></div></header><style data-emotion="css pn4xbf">.css-pn4xbf{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;min-height:100vh;position:relative;overflow-x:hidden;background:var(--theme-ui-colors-background);-webkit-transition:background 0.25s var(--ease-in-out-quad);transition:background 0.25s var(--ease-in-out-quad);}</style><div class="css-pn4xbf e1krdi8y3"><style data-emotion="css 1oex1pb">.css-1oex1pb{margin-left:-19rem;-webkit-flex:0 0 19rem;-ms-flex:0 0 19rem;flex:0 0 19rem;font-size:0.875rem;}@media (min-width: 38.73684210526316em){.css-1oex1pb{margin-left:0;}}</style><aside class="css-1oex1pb ednv8641"><style data-emotion="css 1wrooys">.css-1wrooys{position:fixed;top:0;bottom:0;overflow-x:hidden;overflow-y:auto;width:19rem;height:100%;padding:1rem 0;background:var(--theme-ui-colors-sidebar);-webkit-transition:0.25s var(--ease-in-out-quad);transition:0.25s var(--ease-in-out-quad);}@media (min-width: 38.73684210526316em){.css-1wrooys{-webkit-transform:translateX(0);-moz-transform:translateX(0);-ms-transform:translateX(0);transform:translateX(0);padding:6.6rem 0 1rem;}}</style><nav class="css-1wrooys ednv8640"><style data-emotion="css pv1s1f">.css-pv1s1f{margin:0;padding:0;list-style:none;}</style><ul class="css-pv1s1f e1dzqqml0"><style data-emotion="css 1lbpo2j">.css-1lbpo2j{position:relative;display:block;padding:0;margin:0.2rem 0;width:100%;list-style:none;}</style><li class="css-1lbpo2j eo1v1f02"><style data-emotion="css 2kw81a">.css-2kw81a{margin:0.5rem 0 0.5rem 1.2rem;padding:0;list-style:none;}.css-2kw81a>li{margin:0;}</style><ul class="css-2kw81a eo1v1f00"><li class="css-1lbpo2j eo1v1f02"><style data-emotion="css zl329z">.css-zl329z{display:block;padding:0.5rem 1.8rem 0.5rem 1.2rem;width:100%;color:var(--theme-ui-colors-text);font-weight:600;-webkit-text-decoration:none;text-decoration:none;-webkit-transition:color 0.2s ease-out;transition:color 0.2s ease-out;}.css-zl329z:hover,.css-zl329z:focus,.css-zl329z.is-active{color:var(--theme-ui-colors-primary);}</style><a class="css-zl329z eo1v1f01" href="/databases/part1">First steps</a></li><li class="css-1lbpo2j eo1v1f02"><a class="css-zl329z eo1v1f01" href="/databases/part2">SQL Basics</a></li><li class="css-1lbpo2j eo1v1f02"><a class="css-zl329z eo1v1f01" href="/databases/part3">Multible tables</a></li><li class="css-1lbpo2j eo1v1f02"><a class="css-zl329z eo1v1f01" href="/databases/part4">More techniques</a></li><li class="css-1lbpo2j eo1v1f02"><a class="css-zl329z eo1v1f01" href="/databases/part5">Designing databases</a></li><li class="css-1lbpo2j eo1v1f02"><a class="css-zl329z eo1v1f01" href="/databases/part6">Data integrity</a></li><li class="css-1lbpo2j eo1v1f02"><a aria-current="page" class="css-zl329z eo1v1f01 is-active" href="/databases/part7">Efficiency</a></li><li class="css-1lbpo2j eo1v1f02"><a class="css-zl329z eo1v1f01" href="/databases/exercises">Exercises and Exam</a></li></ul></li></ul></nav></aside><style data-emotion="css 1a5xr11">.css-1a5xr11{-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;min-width:20rem;padding-bottom:5rem;}</style><div class="css-1a5xr11 e1krdi8y2"><style data-emotion="css 1ni6xgg">.css-1ni6xgg{margin:auto;padding:2rem 1rem 2.5rem;-webkit-transition:0.25s var(--ease-in-out-quad);transition:0.25s var(--ease-in-out-quad);opacity:1;}@media (min-width: 38.73684210526316em){.css-1ni6xgg{-webkit-transform:translateX(0);-moz-transform:translateX(0);-ms-transform:translateX(0);transform:translateX(0);opacity:1;padding:7rem 3rem 3rem;max-width:50rem;}}</style><main class="css-1ni6xgg e1krdi8y1"><style data-emotion="css 1daj6ng">.css-1daj6ng{padding-top:0;margin-top:0;}.css-1daj6ng::before{display:none!important;}</style><h1 class="css-1daj6ng e137ubq00">Efficiency</h1><style data-emotion="css 1up8dbe">.css-1up8dbe{font-family:-apple-system,BlinkMacSystemFont,San Francisco,Helvetica Neue,Helvetica,Ubuntu,Roboto,Noto,Segoe UI,Arial,sans-serif;line-height:1.125;font-weight:700;margin-top:0;margin-bottom:16px;font-size:36px;}.css-1up8dbe::before{content:" ";display:block;padding-top:30px;margin-bottom:40px;border-bottom:1px solid;border-bottom-color:var(--theme-ui-colors-borderColor);}</style><h1 id="executing-a-query" class="css-1up8dbe">Executing a query</h1><style data-emotion="css zitybv">.css-zitybv{margin-top:32px;margin-bottom:32px;}</style><p class="css-zitybv">SQL is nice to the user for making queries, as the user only has to describe what information they wish to retrieve, and the database system does the rest. Thus it is crucial for the database system to find a reasonably efficient way to implement the user&#x27;s query and deliver the results to the user.</p><style data-emotion="css vq3asz">.css-vq3asz{font-family:-apple-system,BlinkMacSystemFont,San Francisco,Helvetica Neue,Helvetica,Ubuntu,Roboto,Noto,Segoe UI,Arial,sans-serif;line-height:1.125;font-weight:700;margin-top:0;margin-bottom:16px;font-size:28px;}.css-vq3asz::before{content:" ";display:block;padding-top:30px;margin-bottom:40px;border-bottom:1px solid;border-bottom-color:var(--theme-ui-colors-borderColor);}</style><h2 id="explain-explain" class="css-vq3asz">Explain! Explain!</h2><p class="css-zitybv">Many database systems have a choice of explaining the plan, how it intends to run the given query. With this we can examine the interal functionality of the system.</p><p class="css-zitybv">Let&#x27;s examine a query, which retrieves the information for <style data-emotion="css 1eipsn1">.css-1eipsn1{color:var(--theme-ui-colors-primary);background:rgba(233, 218, 172, 0.15);border-radius:3px;padding-left:0.4rem;padding-right:0.4rem;padding-top:0.2rem;padding-bottom:0.2rem;}</style><code class="css-1eipsn1">radish</code> from the table <code class="css-1eipsn1">Products</code>:</p><style data-emotion="css 14vuu3">.css-14vuu3{background-color:#282c34;color:#ffffff;font-family:"Operator Mono",monospace;font-size:0.9rem;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;overflow:auto;border-radius:6px;padding:16px;margin-top:32px;margin-bottom:32px;}.css-14vuu3 .attr-name{color:#c5a5c5;}.css-14vuu3 .attr-value{color:#8dc891;}.css-14vuu3 .comment,.css-14vuu3 .block-comment,.css-14vuu3 .prolog,.css-14vuu3 .doctype,.css-14vuu3 .cdata,.css-14vuu3 .shebang{color:#999999;}.css-14vuu3 .property,.css-14vuu3 .number,.css-14vuu3 .function-name,.css-14vuu3 .constant,.css-14vuu3 .symbol,.css-14vuu3 .deleted{color:#5a9bcf;}.css-14vuu3 .boolean{color:#ff8b50;}.css-14vuu3 .tag{color:#fc929e;}.css-14vuu3 .string{color:#8dc891;}.css-14vuu3 .punctuation{color:#8dc891;}.css-14vuu3 .selector,.css-14vuu3 .char,.css-14vuu3 .builtin,.css-14vuu3 .inserted{color:#D8DEE9;}.css-14vuu3 .function{color:#79b6f2;}.css-14vuu3 .operator,.css-14vuu3 .entity,.css-14vuu3 .url,.css-14vuu3 .variable{color:#d7deea;}.css-14vuu3 .keyword{color:#c5a5c5;}.css-14vuu3 .at-rule,.css-14vuu3 .class-name{color:#FAC863;}.css-14vuu3 .important{font-weight:400;}.css-14vuu3 .bold{font-weight:700;}.css-14vuu3 .italic{font-style:italic;}.css-14vuu3 .namespace{opacity:0.7;}.css-14vuu3 .highlight{background-color:var(--theme-ui-colors-highlight);font-weight:700;}</style><style data-emotion="css 1itelf7">.css-1itelf7{background-color:#282c34;color:#ffffff;font-family:"Operator Mono",monospace;font-size:0.9rem;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;overflow:auto;border-radius:6px;padding:16px;margin-top:32px;margin-bottom:32px;}.css-1itelf7 .attr-name{color:#c5a5c5;}.css-1itelf7 .attr-value{color:#8dc891;}.css-1itelf7 .comment,.css-1itelf7 .block-comment,.css-1itelf7 .prolog,.css-1itelf7 .doctype,.css-1itelf7 .cdata,.css-1itelf7 .shebang{color:#999999;}.css-1itelf7 .property,.css-1itelf7 .number,.css-1itelf7 .function-name,.css-1itelf7 .constant,.css-1itelf7 .symbol,.css-1itelf7 .deleted{color:#5a9bcf;}.css-1itelf7 .boolean{color:#ff8b50;}.css-1itelf7 .tag{color:#fc929e;}.css-1itelf7 .string{color:#8dc891;}.css-1itelf7 .punctuation{color:#8dc891;}.css-1itelf7 .selector,.css-1itelf7 .char,.css-1itelf7 .builtin,.css-1itelf7 .inserted{color:#D8DEE9;}.css-1itelf7 .function{color:#79b6f2;}.css-1itelf7 .operator,.css-1itelf7 .entity,.css-1itelf7 .url,.css-1itelf7 .variable{color:#d7deea;}.css-1itelf7 .keyword{color:#c5a5c5;}.css-1itelf7 .at-rule,.css-1itelf7 .class-name{color:#FAC863;}.css-1itelf7 .important{font-weight:400;}.css-1itelf7 .bold{font-weight:700;}.css-1itelf7 .italic{font-style:italic;}.css-1itelf7 .namespace{opacity:0.7;}.css-1itelf7 .highlight{background-color:var(--theme-ui-colors-highlight);font-weight:700;}</style><pre class="prism-code language-css-0 css-1itelf7"><div class="token-line"><span class="token plain">SELECT * FROM Products WHERE name=&#x27;radish&#x27;;</span></div></pre><p class="css-zitybv">When we add the word <code class="css-1eipsn1">EXPLAIN</code> before the query in SQLite, we can get the following kind of representation, how the query is planned to run:</p><pre class="prism-code language-css-0 css-1itelf7"><div class="token-line"><span class="token plain">sqlite&gt; EXPLAIN SELECT * FROM Products WHERE name=&#x27;radish&#x27;;</span></div><div class="token-line"><span class="token plain">addr  opcode         p1    p2    p3    p4             p5  comment      </span></div><div class="token-line"><span class="token plain">----  -------------  ----  ----  ----  -------------  --  -------------</span></div><div class="token-line"><span class="token plain">0     Init           0     12    0                    00  Start at 12  </span></div><div class="token-line"><span class="token plain">1     OpenRead       0     2     0     3              00  root=2 iDb=0; Products</span></div><div class="token-line"><span class="token plain">2     Rewind         0     10    0                    00               </span></div><div class="token-line"><span class="token plain">3       Column         0     1     1                    00  r[1]=Products.name</span></div><div class="token-line"><span class="token plain">4       Ne             2     9     1     (BINARY)       52  if r[2]!=r[1] goto 9</span></div><div class="token-line"><span class="token plain">5       Rowid          0     3     0                    00  r[3]=rowid   </span></div><div class="token-line"><span class="token plain">6       Copy           1     4     0                    00  r[4]=r[1]    </span></div><div class="token-line"><span class="token plain">7       Column         0     2     5                    00  r[5]=Products.price</span></div><div class="token-line"><span class="token plain">8       ResultRow      3     3     0                    00  output=r[3..5]</span></div><div class="token-line"><span class="token plain">9     Next           0     3     0                    01               </span></div><div class="token-line"><span class="token plain">10    Close          0     0     0                    00               </span></div><div class="token-line"><span class="token plain">11    Halt           0     0     0                    00               </span></div><div class="token-line"><span class="token plain">12    Transaction    0     0     1     0              01  usesStmtJournal=0</span></div><div class="token-line"><span class="token plain">13    TableLock      0     2     0     Products       00  iDb=0 root=2 write=0</span></div><div class="token-line"><span class="token plain">14    String8        0     2     0     radish        00  r[2]=&#x27;radish&#x27;</span></div><div class="token-line"><span class="token plain">15    Goto           0     1     0                    00</span></div></pre><p class="css-zitybv">SQLite transforms the query into an internal <em class="css-0">program</em>, which retrieves the information from the tables. In this case the program execution begins from the line 12, where we begin the transaction, and on row 14 we place the string &quot;radish&quot; from our query into the register 2. After this the execution moves to row 1, where it begins the handling for table <code class="css-1eipsn1">Products</code>, and rows from 2 to 9 form a loop, which searches for a matching row from the table.</p><p class="css-zitybv">We can ask for more compact plan with the keywords <code class="css-1eipsn1">EXPLAIN QUERY PLAN</code>. Then the result is something in the line of:</p><pre class="prism-code language-css-0 css-1itelf7"><div class="token-line"><span class="token plain">sqlite&gt; EXPLAIN QUERY PLAN SELECT * FROM Products WHERE name=&#x27;radish&#x27;;</span></div><div class="token-line"><span class="token plain">0|0|0|SCAN TABLE Products</span></div></pre><p class="css-zitybv">Here <code class="css-1eipsn1">SCAN TABLE Products</code> means that the query goes through the table <code class="css-1eipsn1">Products</code>.</p><h2 id="optimizing-a-query" class="css-vq3asz">Optimizing a query</h2><p class="css-zitybv">If a query retrieves data from only a single table, the query is usually quite simple to execute, but the real problems come when we make queries to multiple tables. Then the database system should be able to optimize query execution, or form a good plan, with which the desired information can be collected from the tables efficiently.</p><p class="css-zitybv">Let&#x27;s examine a query which lists course and teacher names:</p><pre class="language-sql prism-code language-sql css-1itelf7"><div class="token-line"><span class="token keyword">SELECT</span><span class="token plain"> C</span><span class="token punctuation">.</span><span class="token plain">name</span><span class="token punctuation">,</span><span class="token plain"> T</span><span class="token punctuation">.</span><span class="token plain">name </span><span class="token keyword">FROM</span><span class="token plain"> Courses C</span><span class="token punctuation">,</span><span class="token plain"> Teachers T </span><span class="token keyword">WHERE</span><span class="token plain"> C</span><span class="token punctuation">.</span><span class="token plain">teacher_id </span><span class="token operator">=</span><span class="token plain"> T</span><span class="token punctuation">.</span><span class="token plain">id</span><span class="token punctuation">;</span></div></pre><p class="css-zitybv">As the query focuses on two table, we have thought about the query functionality so, that it first creates the combination of all the rows from the tables <code class="css-1eipsn1">Courses</code> and <code class="css-1eipsn1">Teachers</code> and then selects those rows, which satisfy the condition <code class="css-1eipsn1">C.teacher_id = T.id</code>. This is a good way to think, but this does not actually reflect the functionality of a proper database system.</p><p class="css-zitybv">The issue is that both <code class="css-1eipsn1">Courses</code> and <code class="css-1eipsn1">Teachers</code> could have a large amount of rows. For example if both tables have a million rows, the combination of both would be million millions, and it would take an enormous time to go through all the combinations.</p><p class="css-zitybv">In this situation the database system has to understand, what the user is actually searching for and how the condition limits the result set. Practically it is enough to go through all the rows from table <code class="css-1eipsn1">Courses</code> and with each row search somehow efficiently the desired row from the table <code class="css-1eipsn1">Teachers</code>.</p><p class="css-zitybv">We can once more ask SQLite to explain the plan for the query:</p><pre class="prism-code language-css-0 css-1itelf7"><div class="token-line"><span class="token plain">sqlite&gt; EXPLAIN QUERY PLAN SELECT C.name, T.name FROM Courses C, Teachers T WHERE C.teacher_id = T.id;</span></div><div class="token-line"><span class="token plain">0|0|0|SCAN TABLE Courses AS C</span></div><div class="token-line"><span class="token plain">0|1|1|SEARCH TABLE Teachers AS T USING INTEGER PRIMARY KEY (rowid=?)</span></div></pre><p class="css-zitybv">This query iterates through the table <code class="css-1eipsn1">Courses</code> rows (<code class="css-1eipsn1">SCAN TABLE Courses</code>) and retrieves information from <code class="css-1eipsn1">Teachers</code> with the primary key (<code class="css-1eipsn1">SEARCH TABLE Teachers</code>). The latter means that while processing a certain row from <code class="css-1eipsn1">Courses</code>, the query efficiently searches from <code class="css-1eipsn1">Teachers</code> where the primary key <code class="css-1eipsn1">T.id</code> is same as <code class="css-1eipsn1">C.teacher_id</code>.</p><p class="css-zitybv">But how can we search <code class="css-1eipsn1">Teachers</code> efficiently? This is done by indeksin, which we will look into next.</p><h1 id="indexes" class="css-1up8dbe">Indexes</h1><p class="css-zitybv"><em class="css-0">Index</em> is a datastructure saved alongside the database table, whose function is to make the queries to said table more efficient. With an index a database system can efficiently solve, where in the table are the rows which match a certain query condition.</p><h2 id="primary-key-index" class="css-vq3asz">Primary key index</h2><p class="css-zitybv">When a table is created in a database, the primary key automatically receives an index. Because of this we can efficiently perform queries, where the condition involves the primary key.</p><p class="css-zitybv">For example if we crate this table in SQLite</p><pre class="language-sql prism-code language-sql css-1itelf7"><div class="token-line"><span class="token keyword">CREATE</span><span class="token plain"> </span><span class="token keyword">TABLE</span><span class="token plain"> Products </span><span class="token punctuation">(</span><span class="token plain">id </span><span class="token keyword">INTEGER</span><span class="token plain"> </span><span class="token keyword">PRIMARY</span><span class="token plain"> </span><span class="token keyword">KEY</span><span class="token punctuation">,</span><span class="token plain"> name </span><span class="token keyword">TEXT</span><span class="token punctuation">,</span><span class="token plain"> price </span><span class="token keyword">INTEGER</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></pre><p class="css-zitybv">An index is created for the column <code class="css-1eipsn1">id</code> and we can search efficiently products based on their id. Because of this for example the next query is efficient:</p><pre class="language-sql prism-code language-sql css-1itelf7"><div class="token-line"><span class="token keyword">SELECT</span><span class="token plain"> price </span><span class="token keyword">FROM</span><span class="token plain"> Products </span><span class="token keyword">WHERE</span><span class="token plain"> id</span><span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">;</span></div></pre><p class="css-zitybv">We can confirm the efficiency with the explanation:</p><pre class="prism-code language-css-0 css-1itelf7"><div class="token-line"><span class="token plain">sqlite&gt; EXPLAIN QUERY PLAN SELECT price FROM Products WHERE id=3;</span></div><div class="token-line"><span class="token plain">selectid    order       from        detail                                                   </span></div><div class="token-line"><span class="token plain">----------  ----------  ----------  ---------------------------------------------------------</span></div><div class="token-line"><span class="token plain">0           0           0           SEARCH TABLE Products USING INTEGER PRIMARY KEY (rowid=?)</span></div></pre><p class="css-zitybv">The plan contains <code class="css-1eipsn1">SEARCH TABLE</code> which means the query can search the table with an index efficiently.</p><h2 id="creating-an-index" class="css-vq3asz">Creating an index</h2><p class="css-zitybv">The primary key index is handy, but we might want to search information with other columns as well. For example the following query retrieves the rows with the <code class="css-1eipsn1">price</code> column:</p><pre class="language-sql prism-code language-sql css-1itelf7"><div class="token-line"><span class="token keyword">SELECT</span><span class="token plain"> name </span><span class="token keyword">FROM</span><span class="token plain"> Products </span><span class="token keyword">WHERE</span><span class="token plain"> price</span><span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">;</span></div></pre><p class="css-zitybv">This is not efficient by default, as the column <code class="css-1eipsn1">price</code> does not have an index. We can once again check this with an explanation:</p><pre class="prism-code language-css-0 css-1itelf7"><div class="token-line"><span class="token plain">sqlite&gt; EXPLAIN QUERY PLAN SELECT name FROM Products WHERE price=4;</span></div><div class="token-line"><span class="token plain">selectid    order       from        detail             </span></div><div class="token-line"><span class="token plain">----------  ----------  ----------  -------------------</span></div><div class="token-line"><span class="token plain">0           0           0           SCAN TABLE Products</span></div></pre><p class="css-zitybv">Now the plan contains <code class="css-1eipsn1">SCAN TABLE</code> which means the query has to iterate through all the rows in the table. This is slow, if the table contains many rows.</p><p class="css-zitybv">We can create a new index, which makes the queries via column <code class="css-1eipsn1">price</code> more efficient. We can create an index with <code class="css-1eipsn1">CREATE INDEX</code> as follows:</p><pre class="language-sql prism-code language-sql css-1itelf7"><div class="token-line"><span class="token keyword">CREATE</span><span class="token plain"> </span><span class="token keyword">INDEX</span><span class="token plain"> idx_price </span><span class="token keyword">ON</span><span class="token plain"> Products </span><span class="token punctuation">(</span><span class="token plain">price</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></pre><p class="css-zitybv">Here the <code class="css-1eipsn1">idx_price</code> is the name of the index, with which we can refer to it later. The index works automatically after the creation, so the database system can use it in queries and takes care of updating it.</p><h2 id="how-does-the-index-work" class="css-vq3asz">How does the index work?</h2><p class="css-zitybv">Index requires a data structure, which can be efficiently searched through based on the values for the rows in the column. This can be achieved with for example a tree structure, where the keys are column values.</p><p class="css-zitybv">After creating the index, we can again ask for the plan:</p><pre class="prism-code language-css-0 css-1itelf7"><div class="token-line"><span class="token plain">sqlite&gt; EXPLAIN QUERY PLAN SELECT name FROM Products WHERE price=4;</span></div><div class="token-line"><span class="token plain">selectid    order       from        detail                                               </span></div><div class="token-line"><span class="token plain">----------  ----------  ----------  -----------------------------------------------------</span></div><div class="token-line"><span class="token plain">0           0           0           SEARCH TABLE Products USING INDEX idx_price (price=?)</span></div></pre><p class="css-zitybv">Because of the index the <code class="css-1eipsn1">SCAN TABLE</code> has been replaced with <code class="css-1eipsn1">SEARCH TABLE</code>. In the plan you can also see, that it uses the new index <code class="css-1eipsn1">idx_price</code> in the search.</p><h2 id="more-uses" class="css-vq3asz">More uses</h2><p class="css-zitybv">We can also use indexes in queries, where we retrieve smaller or larger values. For example with the index created for the column <code class="css-1eipsn1">price</code> we can for example search for rows with which applies the condition <code class="css-1eipsn1">price&lt;3</code> or <code class="css-1eipsn1">price&gt;=8</code>.</p><p class="css-zitybv">An index can also be created based on several columns. We could create an index with for example:</p><pre class="language-sql prism-code language-sql css-1itelf7"><div class="token-line"><span class="token keyword">CREATE</span><span class="token plain"> </span><span class="token keyword">INDEX</span><span class="token plain"> idx_price </span><span class="token keyword">ON</span><span class="token plain"> Products </span><span class="token punctuation">(</span><span class="token plain">price</span><span class="token punctuation">,</span><span class="token plain">name</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></pre><p class="css-zitybv">In this index the rows are ordered primarily by <code class="css-1eipsn1">price</code> and secondarily by <code class="css-1eipsn1">name</code>. The index enhances the queries, where the search condition is either just <code class="css-1eipsn1">price</code> or the combination of <code class="css-1eipsn1">price</code> and <code class="css-1eipsn1">name</code>. This index does not help queries where the search is based purely on <code class="css-1eipsn1">name</code>.</p><h2 id="when-to-create-an-index" class="css-vq3asz">When to create an index?</h2><p class="css-zitybv">In theory you might think that it is good to create an index for all the columns of all the tables, and boost all the queries possible. In practice this is not a good idea.</p><p class="css-zitybv">Even though indexes boost queries, they come with two drawbacks: The data structure required for a tree takes space, and indexing slows down adding and changing data. The latter is because when the data in the table is changed, the change has to be updated also to all teh indexes associated with the table. We shouldn&#x27;t be creating indexes just because we can.</p><p class="css-zitybv">A good reason for indexing is, if we want to run certain types of queries often and they are slow because the database system has to go through all the rows in a table during the query. In this situation we could add an index for the table, so this sort of query would be faster in the future.</p><p class="css-zitybv">Indexing has quite an impact on database efficiency. Many a databases work slowly, because they are missing crucial indexes. The balance between enough indexes and too many indexes is a delicate one, but should be taken into consideration while developing databases.</p><h1 id="repetitive-information" class="css-1up8dbe">Repetitive information</h1><p class="css-zitybv">Idealistic situation in database design is that databases do not contain repetitive information, which could be deducted from other information in the database. Sometimes we have to bend a little of this principle to make queries more efficient.</p><h2 id="example" class="css-vq3asz">Example</h2><p class="css-zitybv">Let&#x27;s look at a bank database, where the table <code class="css-1eipsn1">Tranactions</code> contains information about account transactions. With each transaction there is a column <code class="css-1eipsn1">change</code> which indicates how much the balance changes (so it can be either positive or negative).</p><p class="css-zitybv">The following example returns the current balance of account number 123 by counting together all the changes associated with the account:</p><pre class="language-sql prism-code language-sql css-1itelf7"><div class="token-line"><span class="token keyword">SELECT</span><span class="token plain"> </span><span class="token function">SUM</span><span class="token punctuation">(</span><span class="token plain">change</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token keyword">FROM</span><span class="token plain"> </span><span class="token keyword">Transactions</span><span class="token plain"> </span><span class="token keyword">WHERE</span><span class="token plain"> account_id</span><span class="token operator">=</span><span class="token number">123</span><span class="token punctuation">;</span></div></pre><p class="css-zitybv">This is a nice query per se, but it has to go through all the rows associated with the account 123 from the table <code class="css-1eipsn1">Transactions</code> to find the current balance. This is kind of unneccessary work, as we are not interested in the history but only the balance.</p><p class="css-zitybv">We can make the query more efficient by creating a new table <code class="css-1eipsn1">Balances</code> which contains the balance of each account. With this account we can retrieve the balance of account 123 this easily:</p><pre class="language-sql prism-code language-sql css-1itelf7"><div class="token-line"><span class="token keyword">SELECT</span><span class="token plain"> balance </span><span class="token keyword">FROM</span><span class="token plain"> Balances </span><span class="token keyword">FROM</span><span class="token plain"> account_id</span><span class="token operator">=</span><span class="token number">123</span><span class="token punctuation">;</span></div></pre><p class="css-zitybv">Here we break the principle that a database should not contain information that can be counted from other information in the database, as the information in table <code class="css-1eipsn1">Balances</code> could be calculated from a row in the table <code class="css-1eipsn1">Transactions</code>. This way though we can make much more efficient query.</p><p class="css-zitybv">What&#x27;s wrong with breaking the principle? Well, we just made updating the database harder. Every time we now add a new row to table <code class="css-1eipsn1">Transactions</code>, we also have to make a change to table <code class="css-1eipsn1">Balances</code>. Previously the balance was calculated directly from the transactions, why it was always current.</p><h2 id="denormalization" class="css-vq3asz">Denormalization</h2><p class="css-zitybv">In database theory the term <em class="css-0">denormalization</em> is used, which means making queries more efficient by adding repetitive information. This time we are doing quite the oppisite than with normalization.</p><h2 id="changes-vs-queries" class="css-vq3asz">Changes vs Queries</h2><p class="css-zitybv">Often occuring phenomenon in computer science is that we have to balance if we prefer to retrieve or update data efficiently, and how much space can we use. This is familiar from for example algorithms.</p><p class="css-zitybv">If a database does not contain repetitive information the, changes are easy as each piece of information is stored only in one place, so we only need to change one row. The database also takes up little space, which is desired. On the other hand the queries can be complicated and slow, as the information has to be gathered from different parts of the database.</p><p class="css-zitybv">When we add repetitive information, we can speed up the queries but then again the changes get slower, as the changed information has to be updated to several places. At the same time the space requirement for the database grows.</p><p class="css-zitybv">Unfortunately there is no general rule, how much repetitive information is necessary to add, but it depends on the usage and content of the database. One approach could be starting with no repetitive information, and add repetition when it is apparent the required queries are not efficient enough.</p><p class="css-zitybv">Notice, that indexing is also one example of how repetitive information can make queries more efficient. In those the repetitive information is not stored in the tables, but outside the table in a data structure of their own.</p></main></div><style data-emotion="css 7oi17p">.css-7oi17p{display:none;-webkit-flex:0 0 16rem;-ms-flex:0 0 16rem;flex:0 0 16rem;font-size:0.75rem;font-weight:600;}@media (min-width: 56.36842105263158em){.css-7oi17p{display:block;}}</style><aside class="css-7oi17p e18xy85f4"><style data-emotion="css dxzn2c">.css-dxzn2c{position:fixed;top:0;bottom:0;overflow-x:hidden;overflow-y:auto;width:16rem;height:100%;padding:7rem 1rem 0;}</style><nav class="css-dxzn2c e18xy85f3"><style data-emotion="css 1w6ve1a">.css-1w6ve1a{margin-top:0;font-size:0.7rem;font-weight:700;text-transform:uppercase;}</style><p class="css-1w6ve1a e18xy85f2">Contents</p><style data-emotion="css evawql">.css-evawql{margin:0;padding:0;list-style:none;}.css-evawql ul{margin:0;padding:0;list-style:none;}</style><ul class="css-evawql e18xy85f1"><style data-emotion="css 1uvgd5">.css-1uvgd5{margin:0.3rem 0;}</style><li class="css-1uvgd5 e18xy85f0"><style data-emotion="css 1j0udpt">.css-1j0udpt{display:inline-block;padding:0.2rem 0;width:100%;color:var(--theme-ui-colors-text);-webkit-text-decoration:none;text-decoration:none;-webkit-transition:color 0.2s ease-out;transition:color 0.2s ease-out;}.css-1j0udpt:hover,.css-1j0udpt:focus{color:var(--theme-ui-colors-primary);}</style><a href="/databases/part7#executing-a-query" class="css-1j0udpt e1r4v4s10">Executing a query</a></li><li class="css-1uvgd5 e18xy85f0"><a href="/databases/part7#explain-explain" class="css-1j0udpt e1r4v4s10">Explain! Explain!</a></li><li class="css-1uvgd5 e18xy85f0"><a href="/databases/part7#optimizing-a-query" class="css-1j0udpt e1r4v4s10">Optimizing a query</a></li><li class="css-1uvgd5 e18xy85f0"><a href="/databases/part7#indexes" class="css-1j0udpt e1r4v4s10">Indexes</a></li><li class="css-1uvgd5 e18xy85f0"><a href="/databases/part7#primary-key-index" class="css-1j0udpt e1r4v4s10">Primary key index</a></li><li class="css-1uvgd5 e18xy85f0"><a href="/databases/part7#creating-an-index" class="css-1j0udpt e1r4v4s10">Creating an index</a></li><li class="css-1uvgd5 e18xy85f0"><a href="/databases/part7#how-does-the-index-work" class="css-1j0udpt e1r4v4s10">How does the index work?</a></li><li class="css-1uvgd5 e18xy85f0"><a href="/databases/part7#more-uses" class="css-1j0udpt e1r4v4s10">More uses</a></li><li class="css-1uvgd5 e18xy85f0"><a href="/databases/part7#when-to-create-an-index" class="css-1j0udpt e1r4v4s10">When to create an index?</a></li><li class="css-1uvgd5 e18xy85f0"><a href="/databases/part7#repetitive-information" class="css-1j0udpt e1r4v4s10">Repetitive information</a></li><li class="css-1uvgd5 e18xy85f0"><a href="/databases/part7#example" class="css-1j0udpt e1r4v4s10">Example</a></li><li class="css-1uvgd5 e18xy85f0"><a href="/databases/part7#denormalization" class="css-1j0udpt e1r4v4s10">Denormalization</a></li><li class="css-1uvgd5 e18xy85f0"><a href="/databases/part7#changes-vs-queries" class="css-1j0udpt e1r4v4s10">Changes vs Queries</a></li></ul></nav></aside><style data-emotion="css jl45xv">.css-jl45xv{text-align:center;position:absolute;bottom:0;width:100%;height:6rem;padding-top:10px;font-size:1rem;background:var(--theme-ui-colors-footer);color:var(--theme-ui-colors-text);}.css-jl45xv a{-webkit-text-decoration:none;text-decoration:none;color:var(--theme-ui-colors-background);}</style><footer class="css-jl45xv e1krdi8y0"><p>© <!-- -->2024<!-- -->, Built with<a href="https://web.centria.fi/"> Centria</a></p><p>More information about <a href="/databases/license">License</a></p></footer></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/part7";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-0d51d282d68ddbc99621.js"],"app":["/app-ed530a94b36d312dc3da.js"],"component---src-pages-404-js":["/component---src-pages-404-js-e7816ca82cb45e322130.js"],"component---src-templates-docs-js":["/component---src-templates-docs-js-c82167b9612215b3fdf2.js"]};/*]]>*/</script><script src="/databases/polyfill-0d51d282d68ddbc99621.js" nomodule=""></script><script src="/databases/component---src-templates-docs-js-c82167b9612215b3fdf2.js" async=""></script><script src="/databases/commons-2a140772cd0d960d3ca2.js" async=""></script><script src="/databases/app-ed530a94b36d312dc3da.js" async=""></script><script src="/databases/framework-d79a9ccabaa25efea902.js" async=""></script><script src="/databases/webpack-runtime-268f6552388089c91965.js" async=""></script></body></html>